{
	"name": "Astar ⭐",
	"events": [
		{
			"eventType": "comment",
			"text": "[h3] Данный лист событий сильно зависим от листа Grid. [/h2]\n\nПоиск пути зависим от листа событий Grid."
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Astar - pathfinding",
			"description": "Основной поиск пути.",
			"isActiveOnStart": true,
			"children": [
				{
					"functionName": "astar_find_path",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionIsAsync": true,
					"functionParameters": [
						{
							"name": "start",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 861217799617458
						},
						{
							"name": "goal",
							"type": "number",
							"initialValue": "-1",
							"comment": "",
							"sid": 517240723009236
						},
						{
							"name": "diagonals",
							"type": "boolean",
							"initialValue": "true",
							"comment": "",
							"sid": 987835801357018
						}
					],
					"eventType": "function-block",
					"conditions": [],
					"actions": [],
					"sid": 289284052349794,
					"children": [
						{
							"eventType": "variable",
							"name": "current",
							"type": "number",
							"initialValue": "-1",
							"comment": "",
							"isStatic": true,
							"isConstant": false,
							"sid": 379643017104280
						},
						{
							"eventType": "comment",
							"text": "starting"
						},
						{
							"eventType": "block",
							"conditions": [],
							"actions": [],
							"sid": 634087512044930,
							"children": [
								{
									"eventType": "block",
									"conditions": [],
									"actions": [
										{
											"callFunction": "astar_clean_all",
											"sid": 317410672118008
										},
										{
											"callFunction": "astar_frontier_put",
											"sid": 897223470633182,
											"parameters": [
												"start",
												"0"
											]
										},
										{
											"id": "add-key",
											"objectClass": "astar_came_from",
											"sid": 804245462020826,
											"parameters": {
												"key": "str(start)",
												"value": "\"None\""
											}
										},
										{
											"id": "add-key",
											"objectClass": "astar_cost_so_far",
											"sid": 706104902268242,
											"parameters": {
												"key": "str(start)",
												"value": "0"
											}
										}
									],
									"sid": 797571797490848
								}
							]
						},
						{
							"eventType": "comment",
							"text": "path finding procces"
						},
						{
							"eventType": "block",
							"conditions": [],
							"actions": [],
							"sid": 652510038720086,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "while",
											"objectClass": "System",
											"sid": 277679984365329
										},
										{
											"id": "is-empty",
											"objectClass": "astar_frontier",
											"sid": 626946701042187,
											"isInverted": true
										}
									],
									"actions": [],
									"sid": 279210497270298,
									"children": [
										{
											"eventType": "comment",
											"text": "Start"
										},
										{
											"eventType": "block",
											"conditions": [],
											"actions": [],
											"sid": 331910686141137,
											"children": [
												{
													"eventType": "block",
													"conditions": [],
													"actions": [
														{
															"id": "set-eventvar-value",
															"objectClass": "System",
															"sid": 959756030379744,
															"parameters": {
																"variable": "current",
																"value": "Functions.astar_frontier_get"
															}
														}
													],
													"sid": 594881959156229
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "compare-boolean-eventvar",
															"objectClass": "System",
															"sid": 358496888663152,
															"parameters": {
																"variable": "diagonals"
															}
														}
													],
													"actions": [
														{
															"id": "load",
															"objectClass": "astar_neighbours",
															"sid": 192616056011422,
															"parameters": {
																"json": "Functions.grid_get_neighbours(current, 1)"
															}
														}
													],
													"sid": 659794077742893
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "else",
															"objectClass": "System",
															"sid": 145454340006377
														}
													],
													"actions": [
														{
															"id": "load",
															"objectClass": "astar_neighbours",
															"sid": 291306022893469,
															"parameters": {
																"json": "Functions.grid_get_neighbours(current, 0)"
															}
														}
													],
													"sid": 442127200383370
												}
											]
										},
										{
											"eventType": "comment",
											"text": "If the goal was met, then stop the loop"
										},
										{
											"eventType": "block",
											"conditions": [],
											"actions": [],
											"sid": 969784510364383,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "compare-two-values",
															"objectClass": "System",
															"sid": 433165382765621,
															"parameters": {
																"first-value": "current",
																"comparison": 0,
																"second-value": "goal"
															}
														}
													],
													"actions": [
														{
															"id": "stop-loop",
															"objectClass": "System",
															"sid": 102821593222583
														}
													],
													"sid": 757444877255059
												}
											]
										},
										{
											"eventType": "comment",
											"text": "Main loop"
										},
										{
											"eventType": "block",
											"conditions": [],
											"actions": [],
											"sid": 990465126771854,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "for",
															"objectClass": "System",
															"sid": 502925235202589,
															"parameters": {
																"name": "\"next\"",
																"start-index": "0",
																"end-index": "astar_neighbours.Width - 1"
															}
														}
													],
													"actions": [],
													"sid": 758652734128931,
													"children": [
														{
															"eventType": "variable",
															"name": "next",
															"type": "number",
															"initialValue": "-1",
															"comment": "",
															"isStatic": true,
															"isConstant": false,
															"sid": 553973558072463
														},
														{
															"eventType": "variable",
															"name": "new_cost",
															"type": "number",
															"initialValue": "-1",
															"comment": "",
															"isStatic": true,
															"isConstant": false,
															"sid": 419587996248280
														},
														{
															"eventType": "block",
															"conditions": [],
															"actions": [
																{
																	"id": "set-eventvar-value",
																	"objectClass": "System",
																	"sid": 311317817259629,
																	"parameters": {
																		"variable": "next",
																		"value": "astar_neighbours.At(loopindex)"
																	}
																},
																{
																	"id": "set-eventvar-value",
																	"objectClass": "System",
																	"sid": 483236203453675,
																	"parameters": {
																		"variable": "new_cost",
																		"value": "astar_cost_so_far.Get(str(current)) + Functions.grid_get_index_cost(next)"
																	}
																}
															],
															"sid": 426638993321528
														},
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "compare-two-values",
																	"objectClass": "System",
																	"sid": 881929477606133,
																	"parameters": {
																		"first-value": "Functions.grid_is_index_free(next)",
																		"comparison": 0,
																		"second-value": "1"
																	}
																},
																{
																	"id": "has-key",
																	"objectClass": "astar_came_from",
																	"sid": 739056540528725,
																	"parameters": {
																		"key": "str(next)"
																	},
																	"isInverted": true
																}
															],
															"actions": [],
															"sid": 481325188686146,
															"children": [
																{
																	"eventType": "block",
																	"conditions": [
																		{
																			"id": "has-key",
																			"objectClass": "astar_cost_so_far",
																			"sid": 636382336444605,
																			"parameters": {
																				"key": "str(next)"
																			},
																			"isInverted": true
																		},
																		{
																			"id": "compare-eventvar",
																			"objectClass": "System",
																			"sid": 235577204719359,
																			"parameters": {
																				"variable": "new_cost",
																				"comparison": 2,
																				"value": "astar_cost_so_far.Get(str(next))"
																			}
																		}
																	],
																	"actions": [
																		{
																			"id": "add-key",
																			"objectClass": "astar_cost_so_far",
																			"sid": 235029520663692,
																			"parameters": {
																				"key": "str(next)",
																				"value": "new_cost"
																			}
																		},
																		{
																			"id": "add-key",
																			"objectClass": "astar_came_from",
																			"sid": 421948431097869,
																			"parameters": {
																				"key": "str(next)",
																				"value": "current"
																			}
																		},
																		{
																			"callFunction": "astar_frontier_put",
																			"sid": 768679773801093,
																			"parameters": [
																				"next",
																				"new_cost + Functions.astar_heuristic(Functions.grid_index_to_x(goal, 1, 0), Functions.grid_index_to_y(goal, 1, 0), Functions.grid_index_to_x(next, 1, 0), Functions.grid_index_to_y(next, 1, 0))"
																			]
																		}
																	],
																	"sid": 185171600730353,
																	"isOrBlock": true
																}
															]
														}
													]
												}
											]
										}
									]
								}
							]
						},
						{
							"eventType": "comment",
							"text": "structuring path"
						},
						{
							"eventType": "block",
							"conditions": [],
							"actions": [],
							"sid": 963402582088891,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "while",
											"objectClass": "System",
											"sid": 720743023387373
										},
										{
											"id": "compare-eventvar",
											"objectClass": "System",
											"sid": 651158585362755,
											"parameters": {
												"variable": "current",
												"comparison": 1,
												"value": "start"
											}
										}
									],
									"actions": [],
									"sid": 534463542693532,
									"children": [
										{
											"eventType": "block",
											"conditions": [],
											"actions": [
												{
													"id": "push",
													"objectClass": "astar_path",
													"sid": 754801516350917,
													"parameters": {
														"where": "back",
														"value": "current",
														"axis": "x"
													}
												},
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 301064066349260,
													"parameters": {
														"variable": "current",
														"value": "astar_came_from.Get(str(current))"
													}
												}
											],
											"sid": 943220182033904
										}
									]
								},
								{
									"eventType": "block",
									"conditions": [],
									"actions": [
										{
											"id": "reverse",
											"objectClass": "astar_path",
											"sid": 922660190445436,
											"parameters": {
												"axis": "x"
											}
										},
										{
											"type": "comment",
											"text": "Path was processing from end to start, so we will reverse it."
										}
									],
									"sid": 530265531402507
								}
							]
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Альтернативные поиски пути (быстрее чем А*, но менее точны)"
				},
				{
					"functionName": "astar_greedy_search",
					"functionDescription": "",
					"functionCategory": "#astar",
					"functionReturnType": "none",
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "start",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 538699988692879
						},
						{
							"name": "goal",
							"type": "number",
							"initialValue": "-1",
							"comment": "",
							"sid": 848636052939871
						},
						{
							"name": "diagonals",
							"type": "boolean",
							"initialValue": "true",
							"comment": "",
							"sid": 519688891515006
						}
					],
					"eventType": "function-block",
					"conditions": [],
					"actions": [],
					"sid": 573360482478954,
					"children": [
						{
							"eventType": "comment",
							"text": "starting"
						},
						{
							"eventType": "block",
							"conditions": [],
							"actions": [
								{
									"callFunction": "astar_clean_all",
									"sid": 774034133827457
								},
								{
									"callFunction": "astar_frontier_put",
									"sid": 293241048604842,
									"parameters": [
										"start",
										"0"
									]
								},
								{
									"id": "set-size",
									"objectClass": "astar_reached",
									"sid": 276143232132377,
									"parameters": {
										"width": "Functions.grid_get_index_count",
										"height": "1",
										"depth": "1"
									}
								},
								{
									"id": "clear",
									"objectClass": "astar_reached",
									"sid": 919623506991341,
									"parameters": {
										"value": "-1"
									}
								}
							],
							"sid": 730459824952594
						},
						{
							"eventType": "variable",
							"name": "current",
							"type": "number",
							"initialValue": "-1",
							"comment": "",
							"isStatic": true,
							"isConstant": false,
							"sid": 942160252362113
						},
						{
							"eventType": "comment",
							"text": "path finding procces"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "while",
									"objectClass": "System",
									"sid": 572937345319351
								},
								{
									"id": "is-empty",
									"objectClass": "astar_frontier",
									"sid": 391871563161048,
									"isInverted": true
								}
							],
							"actions": [],
							"sid": 955329874141049,
							"children": [
								{
									"eventType": "comment",
									"text": "Start"
								},
								{
									"eventType": "block",
									"conditions": [],
									"actions": [],
									"sid": 837245666243584,
									"children": [
										{
											"eventType": "block",
											"conditions": [],
											"actions": [
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 657300042437536,
													"parameters": {
														"variable": "current",
														"value": "Functions.astar_frontier_get"
													}
												}
											],
											"sid": 726194988879397
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-boolean-eventvar",
													"objectClass": "System",
													"sid": 462274281731577,
													"parameters": {
														"variable": "diagonals"
													}
												}
											],
											"actions": [
												{
													"id": "load",
													"objectClass": "astar_neighbours",
													"sid": 669244936267398,
													"parameters": {
														"json": "Functions.grid_get_neighbours(current, 1)"
													}
												}
											],
											"sid": 319695372169644
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 352259962579242
												}
											],
											"actions": [
												{
													"id": "load",
													"objectClass": "astar_neighbours",
													"sid": 633457493386969,
													"parameters": {
														"json": "Functions.grid_get_neighbours(current, 0)"
													}
												}
											],
											"sid": 921965155981860
										}
									]
								},
								{
									"eventType": "comment",
									"text": "If the goal was met, then stop the loop"
								},
								{
									"eventType": "block",
									"conditions": [],
									"actions": [],
									"sid": 707154643640612,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-two-values",
													"objectClass": "System",
													"sid": 302603248921111,
													"parameters": {
														"first-value": "current",
														"comparison": 0,
														"second-value": "goal"
													}
												}
											],
											"actions": [
												{
													"id": "stop-loop",
													"objectClass": "System",
													"sid": 191197952633885
												}
											],
											"sid": 353534098463773
										}
									]
								},
								{
									"eventType": "comment",
									"text": "Main loop"
								},
								{
									"eventType": "block",
									"conditions": [],
									"actions": [],
									"sid": 761587806866724,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "for",
													"objectClass": "System",
													"sid": 590537285860787,
													"parameters": {
														"name": "\"next\"",
														"start-index": "0",
														"end-index": "astar_neighbours.Width - 1"
													}
												}
											],
											"actions": [],
											"sid": 213147187488742,
											"children": [
												{
													"eventType": "variable",
													"name": "next",
													"type": "number",
													"initialValue": "-1",
													"comment": "",
													"isStatic": true,
													"isConstant": false,
													"sid": 155303307821927
												},
												{
													"eventType": "block",
													"conditions": [],
													"actions": [
														{
															"id": "set-eventvar-value",
															"objectClass": "System",
															"sid": 478275049066736,
															"parameters": {
																"variable": "next",
																"value": "astar_neighbours.At(loopindex)"
															}
														}
													],
													"sid": 320864083856700
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "compare-two-values",
															"objectClass": "System",
															"sid": 201029533328300,
															"parameters": {
																"first-value": "Functions.grid_is_index_free(next)",
																"comparison": 0,
																"second-value": "1"
															}
														},
														{
															"id": "contains-value",
															"objectClass": "astar_reached",
															"sid": 787808621149436,
															"parameters": {
																"value": "next"
															},
															"isInverted": true
														}
													],
													"actions": [
														{
															"callFunction": "astar_frontier_put",
															"sid": 914843571881381,
															"parameters": [
																"next",
																"Functions.astar_heuristic(Functions.grid_index_to_x(goal, 0, 0), Functions.grid_index_to_y(goal, 0, 0), Functions.grid_index_to_x(next, 0, 0), Functions.grid_index_to_y(next, 0, 0))"
															]
														},
														{
															"id": "set-at-x",
															"objectClass": "astar_reached",
															"sid": 593558343103626,
															"parameters": {
																"x": "next",
																"value": "current"
															}
														}
													],
													"sid": 656629186135151
												}
											]
										}
									]
								}
							]
						},
						{
							"eventType": "comment",
							"text": "structuring path"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "while",
									"objectClass": "System",
									"sid": 822262780393279
								},
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 293963957979252,
									"parameters": {
										"variable": "current",
										"comparison": 1,
										"value": "start"
									}
								}
							],
							"actions": [],
							"sid": 336199491997302,
							"children": [
								{
									"eventType": "block",
									"conditions": [],
									"actions": [
										{
											"id": "push",
											"objectClass": "astar_path",
											"sid": 795418462189395,
											"parameters": {
												"where": "back",
												"value": "current",
												"axis": "x"
											}
										},
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 194520184747807,
											"parameters": {
												"variable": "current",
												"value": "astar_reached.At(current)"
											}
										}
									],
									"sid": 381905374889129
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [],
							"actions": [
								{
									"id": "reverse",
									"objectClass": "astar_path",
									"sid": 696204788557860,
									"parameters": {
										"axis": "x"
									}
								}
							],
							"sid": 931720332982523
						}
					]
				},
				{
					"functionName": "astar_dijkstra_search",
					"functionDescription": "",
					"functionCategory": "#astar",
					"functionReturnType": "none",
					"functionIsAsync": true,
					"functionParameters": [
						{
							"name": "start",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 532379544374740
						},
						{
							"name": "goal",
							"type": "number",
							"initialValue": "-1",
							"comment": "",
							"sid": 450284151624149
						},
						{
							"name": "diagonals",
							"type": "boolean",
							"initialValue": "true",
							"comment": "",
							"sid": 170396479419804
						}
					],
					"eventType": "function-block",
					"conditions": [],
					"actions": [],
					"sid": 802859197383383,
					"children": [
						{
							"eventType": "comment",
							"text": "starting"
						},
						{
							"eventType": "block",
							"conditions": [],
							"actions": [
								{
									"callFunction": "astar_clean_all",
									"sid": 640875891378155
								},
								{
									"callFunction": "astar_frontier_put",
									"sid": 486356120533336,
									"parameters": [
										"start",
										"0"
									]
								},
								{
									"id": "add-key",
									"objectClass": "astar_came_from",
									"sid": 135926570112817,
									"parameters": {
										"key": "str(start)",
										"value": "\"None\""
									}
								},
								{
									"id": "add-key",
									"objectClass": "astar_cost_so_far",
									"sid": 437990642364165,
									"parameters": {
										"key": "str(start)",
										"value": "0"
									}
								}
							],
							"sid": 500157800399971
						},
						{
							"eventType": "variable",
							"name": "current",
							"type": "number",
							"initialValue": "-1",
							"comment": "",
							"isStatic": true,
							"isConstant": false,
							"sid": 979439866083516
						},
						{
							"eventType": "comment",
							"text": "path finding procces"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "while",
									"objectClass": "System",
									"sid": 839557222937080
								},
								{
									"id": "is-empty",
									"objectClass": "astar_frontier",
									"sid": 551033921527401,
									"isInverted": true
								}
							],
							"actions": [],
							"sid": 461457195641909,
							"children": [
								{
									"eventType": "comment",
									"text": "Start"
								},
								{
									"eventType": "block",
									"conditions": [],
									"actions": [],
									"sid": 735848032966406,
									"children": [
										{
											"eventType": "block",
											"conditions": [],
											"actions": [
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 777766136791031,
													"parameters": {
														"variable": "current",
														"value": "Functions.astar_frontier_get"
													}
												}
											],
											"sid": 417288990692053
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-boolean-eventvar",
													"objectClass": "System",
													"sid": 841019058317920,
													"parameters": {
														"variable": "diagonals"
													}
												}
											],
											"actions": [
												{
													"id": "load",
													"objectClass": "astar_neighbours",
													"sid": 718497578357634,
													"parameters": {
														"json": "Functions.grid_get_neighbours(current, 1)"
													}
												}
											],
											"sid": 935603077087680
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 667229018992052
												}
											],
											"actions": [
												{
													"id": "load",
													"objectClass": "astar_neighbours",
													"sid": 714944064919240,
													"parameters": {
														"json": "Functions.grid_get_neighbours(current, 0)"
													}
												}
											],
											"sid": 976152188324598
										}
									]
								},
								{
									"eventType": "comment",
									"text": "If the goal was met, then stop the loop"
								},
								{
									"eventType": "block",
									"conditions": [],
									"actions": [],
									"sid": 963597182243002,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-two-values",
													"objectClass": "System",
													"sid": 171114934359780,
													"parameters": {
														"first-value": "current",
														"comparison": 0,
														"second-value": "goal"
													}
												}
											],
											"actions": [
												{
													"id": "stop-loop",
													"objectClass": "System",
													"sid": 283289652145113
												}
											],
											"sid": 515942614107816
										}
									]
								},
								{
									"eventType": "comment",
									"text": "Main loop"
								},
								{
									"eventType": "block",
									"conditions": [],
									"actions": [],
									"sid": 997902927346815,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "for",
													"objectClass": "System",
													"sid": 907264945248568,
													"parameters": {
														"name": "\"next\"",
														"start-index": "0",
														"end-index": "astar_neighbours.Width - 1"
													}
												}
											],
											"actions": [],
											"sid": 992518448961983,
											"children": [
												{
													"eventType": "variable",
													"name": "next",
													"type": "number",
													"initialValue": "-1",
													"comment": "",
													"isStatic": true,
													"isConstant": false,
													"sid": 782511859483613
												},
												{
													"eventType": "variable",
													"name": "new_cost",
													"type": "number",
													"initialValue": "-1",
													"comment": "",
													"isStatic": true,
													"isConstant": false,
													"sid": 861669497884737
												},
												{
													"eventType": "block",
													"conditions": [],
													"actions": [
														{
															"id": "set-eventvar-value",
															"objectClass": "System",
															"sid": 664631539295984,
															"parameters": {
																"variable": "next",
																"value": "astar_neighbours.At(loopindex)"
															}
														},
														{
															"id": "set-eventvar-value",
															"objectClass": "System",
															"sid": 221498227789712,
															"parameters": {
																"variable": "new_cost",
																"value": "astar_cost_so_far.Get(str(current)) + Functions.grid_get_index_cost(next)"
															}
														}
													],
													"sid": 619836435292770
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "compare-two-values",
															"objectClass": "System",
															"sid": 852359131470110,
															"parameters": {
																"first-value": "Functions.grid_is_index_free(next)",
																"comparison": 0,
																"second-value": "1"
															}
														},
														{
															"id": "has-key",
															"objectClass": "astar_came_from",
															"sid": 767870615187880,
															"parameters": {
																"key": "str(next)"
															},
															"isInverted": true
														}
													],
													"actions": [],
													"sid": 817043414639427,
													"children": [
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "has-key",
																	"objectClass": "astar_cost_so_far",
																	"sid": 700695326452026,
																	"parameters": {
																		"key": "str(next)"
																	},
																	"isInverted": true
																},
																{
																	"id": "compare-eventvar",
																	"objectClass": "System",
																	"sid": 974056351728867,
																	"parameters": {
																		"variable": "new_cost",
																		"comparison": 2,
																		"value": "astar_cost_so_far.Get(str(next))"
																	}
																}
															],
															"actions": [
																{
																	"id": "add-key",
																	"objectClass": "astar_cost_so_far",
																	"sid": 389152960553643,
																	"parameters": {
																		"key": "str(next)",
																		"value": "new_cost"
																	}
																},
																{
																	"id": "add-key",
																	"objectClass": "astar_came_from",
																	"sid": 633758175091762,
																	"parameters": {
																		"key": "str(next)",
																		"value": "current"
																	}
																},
																{
																	"callFunction": "astar_frontier_put",
																	"sid": 308932153110784,
																	"parameters": [
																		"next",
																		"new_cost"
																	]
																}
															],
															"sid": 262840997722179,
															"isOrBlock": true
														}
													]
												}
											]
										}
									]
								}
							]
						},
						{
							"eventType": "comment",
							"text": "structuring path"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "while",
									"objectClass": "System",
									"sid": 627976170429062
								},
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 561055044381384,
									"parameters": {
										"variable": "current",
										"comparison": 1,
										"value": "start"
									}
								}
							],
							"actions": [],
							"sid": 782593940405475,
							"children": [
								{
									"eventType": "block",
									"conditions": [],
									"actions": [
										{
											"id": "push",
											"objectClass": "astar_path",
											"sid": 799108511152794,
											"parameters": {
												"where": "back",
												"value": "current",
												"axis": "x"
											}
										},
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 214898511821943,
											"parameters": {
												"variable": "current",
												"value": "astar_came_from.Get(str(current))"
											}
										}
									],
									"sid": 811946412624520
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [],
							"actions": [
								{
									"id": "reverse",
									"objectClass": "astar_path",
									"sid": 591056157012459,
									"parameters": {
										"axis": "x"
									}
								}
							],
							"sid": 566008940140148
						}
					]
				}
			],
			"sid": 169532268821163,
			"background-color": [
				0.8666666666666667,
				0.9607843137254902,
				0.8588235294117647,
				1
			]
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Astar - heuristic",
			"description": "Калькуляция дистанции между позициями в клетках.",
			"isActiveOnStart": true,
			"children": [
				{
					"functionName": "astar_heuristic",
					"functionDescription": "",
					"functionCategory": "#astar",
					"functionReturnType": "number",
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "pos1_x",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 173623577172629
						},
						{
							"name": "pos1_y",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 539833375968967
						},
						{
							"name": "pos2_x",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 389910895008998
						},
						{
							"name": "pos2_y",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 788594666640660
						}
					],
					"eventType": "function-block",
					"conditions": [],
					"actions": [],
					"sid": 633143895635749,
					"children": [
						{
							"eventType": "block",
							"conditions": [],
							"actions": [
								{
									"type": "comment",
									"text": "https://iq.opengenus.org/euclidean-vs-manhattan-vs-chebyshev-distance/",
									"text-color": [
										0,
										0.2,
										1,
										1
									]
								}
							],
							"sid": 817625317601551
						},
						{
							"eventType": "block",
							"conditions": [],
							"actions": [
								{
									"type": "comment",
									"text": "Тут используется формула [b]Manhattan distance"
								},
								{
									"id": "set-function-return-value",
									"objectClass": "Functions",
									"sid": 285616010052837,
									"parameters": {
										"value": "abs(pos1_x - pos2_x) + abs(pos1_y - pos2_y)"
									}
								}
							],
							"sid": 172560581579120
						}
					]
				}
			],
			"sid": 164190475147794
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Astar - clean",
			"description": "Очистка данных.",
			"isActiveOnStart": true,
			"children": [
				{
					"functionName": "astar_clean_all",
					"functionDescription": "Очистка массивов.",
					"functionCategory": "#astar",
					"functionReturnType": "none",
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [],
					"sid": 918632629509152,
					"children": [
						{
							"eventType": "block",
							"conditions": [],
							"actions": [],
							"sid": 138323541776270
						},
						{
							"eventType": "block",
							"conditions": [],
							"actions": [
								{
									"id": "clear",
									"objectClass": "astar_came_from",
									"sid": 310019608576801
								},
								{
									"id": "clear",
									"objectClass": "astar_cost_so_far",
									"sid": 463915291067463
								},
								{
									"callFunction": "astar_clean_path",
									"sid": 887514734981237
								},
								{
									"callFunction": "astar_clean_neighbours",
									"sid": 414156453162961
								},
								{
									"callFunction": "astar_clean_reached",
									"sid": 535033396868025
								},
								{
									"callFunction": "astar_clean_frontier",
									"sid": 649980989532289
								}
							],
							"sid": 380305034161276
						}
					]
				},
				{
					"functionName": "astar_clean_frontier",
					"functionDescription": "",
					"functionCategory": "#astar",
					"functionReturnType": "none",
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [],
					"sid": 740397433582589,
					"children": [
						{
							"eventType": "block",
							"conditions": [],
							"actions": [
								{
									"id": "clear",
									"objectClass": "astar_frontier",
									"sid": 105051032098349,
									"parameters": {
										"value": "-1"
									}
								},
								{
									"id": "set-size",
									"objectClass": "astar_frontier",
									"sid": 891450934687152,
									"parameters": {
										"width": "0",
										"height": "1",
										"depth": "1"
									}
								}
							],
							"sid": 190185494076395
						}
					]
				},
				{
					"functionName": "astar_clean_neighbours",
					"functionDescription": "",
					"functionCategory": "#astar",
					"functionReturnType": "none",
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [],
					"sid": 329693153217546,
					"children": [
						{
							"eventType": "block",
							"conditions": [],
							"actions": [
								{
									"id": "clear",
									"objectClass": "astar_neighbours",
									"sid": 289380176652028,
									"parameters": {
										"value": "-1"
									}
								},
								{
									"id": "set-size",
									"objectClass": "astar_neighbours",
									"sid": 846888405027238,
									"parameters": {
										"width": "0",
										"height": "1",
										"depth": "1"
									}
								}
							],
							"sid": 188166363986097
						}
					]
				},
				{
					"functionName": "astar_clean_path",
					"functionDescription": "",
					"functionCategory": "#astar",
					"functionReturnType": "none",
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [],
					"sid": 947534964539556,
					"children": [
						{
							"eventType": "block",
							"conditions": [],
							"actions": [
								{
									"id": "clear",
									"objectClass": "astar_path",
									"sid": 148298723416984,
									"parameters": {
										"value": "-1"
									}
								},
								{
									"id": "set-size",
									"objectClass": "astar_path",
									"sid": 548740523053124,
									"parameters": {
										"width": "0",
										"height": "1",
										"depth": "1"
									}
								}
							],
							"sid": 140507353608154
						}
					]
				},
				{
					"functionName": "astar_clean_reached",
					"functionDescription": "",
					"functionCategory": "#astar",
					"functionReturnType": "none",
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [],
					"sid": 100146565649213,
					"children": [
						{
							"eventType": "block",
							"conditions": [],
							"actions": [
								{
									"id": "clear",
									"objectClass": "astar_reached",
									"sid": 282118466222550,
									"parameters": {
										"value": "-1"
									}
								},
								{
									"id": "set-size",
									"objectClass": "astar_reached",
									"sid": 831511472216619,
									"parameters": {
										"width": "0",
										"height": "1",
										"depth": "1"
									}
								}
							],
							"sid": 270051440819204
						}
					]
				}
			],
			"sid": 333371190036333
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Astar - priority queue",
			"description": "Уникальная структура хранения данных.",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "https://www.tutorialspoint.com/data_structures_algorithms/priority_queue.htm",
					"text-color": [
						0.011764705882352941,
						0.17254901960784313,
						0.9882352941176471,
						1
					]
				},
				{
					"functionName": "astar_frontier_put",
					"functionDescription": "",
					"functionCategory": "#astar",
					"functionReturnType": "none",
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "element",
							"type": "number",
							"initialValue": "-1",
							"comment": "",
							"sid": 693047920407699
						},
						{
							"name": "priority",
							"type": "number",
							"initialValue": "9999",
							"comment": "",
							"sid": 549571311485942
						}
					],
					"eventType": "function-block",
					"conditions": [],
					"actions": [],
					"sid": 747638236740476,
					"children": [
						{
							"eventType": "block",
							"conditions": [],
							"actions": [
								{
									"id": "push",
									"objectClass": "astar_frontier",
									"sid": 175550546834770,
									"parameters": {
										"where": "front",
										"value": "element",
										"axis": "x"
									}
								},
								{
									"id": "set-size",
									"objectClass": "astar_frontier",
									"sid": 730048273835345,
									"parameters": {
										"width": "Self.Width",
										"height": "2",
										"depth": "1"
									}
								},
								{
									"id": "set-at-xy",
									"objectClass": "astar_frontier",
									"sid": 860379182863895,
									"parameters": {
										"x": "0",
										"y": "1",
										"value": "priority"
									}
								},
								{
									"callFunction": "astar_frontier_sort_by_priority",
									"sid": 799313577900510
								},
								{
									"id": "reverse",
									"objectClass": "astar_frontier",
									"sid": 657653291610355,
									"parameters": {
										"axis": "x"
									}
								}
							],
							"sid": 788838487412622
						}
					]
				},
				{
					"functionName": "astar_frontier_sort_by_priority",
					"functionDescription": "",
					"functionCategory": "#astar",
					"functionReturnType": "none",
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [],
					"sid": 685480366573827,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-two-values",
									"objectClass": "System",
									"sid": 741242847243184,
									"parameters": {
										"first-value": "astar_frontier.Height",
										"comparison": 0,
										"second-value": "2"
									}
								}
							],
							"actions": [],
							"sid": 218317095657437,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "for",
											"objectClass": "System",
											"sid": 494287118077838,
											"parameters": {
												"name": "\"i\"",
												"start-index": "0",
												"end-index": "astar_frontier.Width-1"
											}
										}
									],
									"actions": [],
									"sid": 290682958426920,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "for",
													"objectClass": "System",
													"sid": 600262211439481,
													"parameters": {
														"name": "\"j\"",
														"start-index": "0",
														"end-index": "astar_frontier.Width-1-loopindex(\"i\")-1"
													}
												}
											],
											"actions": [],
											"sid": 700040331041032,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "compare-two-values",
															"objectClass": "System",
															"sid": 407720051208107,
															"parameters": {
																"first-value": "loopindex(\"j\")",
																"comparison": 2,
																"second-value": "astar_frontier.Width-1"
															}
														},
														{
															"id": "compare-two-values",
															"objectClass": "System",
															"sid": 325273600858555,
															"parameters": {
																"first-value": "astar_frontier.At(loopindex(\"j\"), 1)",
																"comparison": 4,
																"second-value": "astar_frontier.At(loopindex(\"j\") + 1, 1)"
															}
														}
													],
													"actions": [],
													"sid": 364807496237389,
													"children": [
														{
															"eventType": "variable",
															"name": "sorting_var",
															"type": "number",
															"initialValue": "-1",
															"comment": "",
															"isStatic": true,
															"isConstant": false,
															"sid": 115825913727265
														},
														{
															"eventType": "variable",
															"name": "sorting_var2",
															"type": "number",
															"initialValue": "-1",
															"comment": "",
															"isStatic": true,
															"isConstant": false,
															"sid": 320196962166039
														},
														{
															"eventType": "block",
															"conditions": [],
															"actions": [
																{
																	"id": "set-eventvar-value",
																	"objectClass": "System",
																	"sid": 455157662960328,
																	"parameters": {
																		"variable": "sorting_var2",
																		"value": "astar_frontier.At(loopindex(\"j\"), 0)"
																	}
																},
																{
																	"id": "set-eventvar-value",
																	"objectClass": "System",
																	"sid": 689402383403729,
																	"parameters": {
																		"variable": "sorting_var",
																		"value": "astar_frontier.At(loopindex(\"j\"), 1)"
																	}
																},
																{
																	"id": "set-at-xy",
																	"objectClass": "astar_frontier",
																	"sid": 715405024715086,
																	"parameters": {
																		"x": "loopindex(\"j\")",
																		"y": "0",
																		"value": "astar_frontier.At(loopindex(\"j\") + 1, 0)"
																	}
																},
																{
																	"id": "set-at-xy",
																	"objectClass": "astar_frontier",
																	"sid": 474596189407993,
																	"parameters": {
																		"x": "loopindex(\"j\")",
																		"y": "1",
																		"value": "astar_frontier.At(loopindex(\"j\") + 1, 1)"
																	}
																},
																{
																	"id": "set-at-xy",
																	"objectClass": "astar_frontier",
																	"sid": 238624992688009,
																	"parameters": {
																		"x": "loopindex(\"j\") + 1",
																		"y": "0",
																		"value": "sorting_var2"
																	}
																},
																{
																	"id": "set-at-xy",
																	"objectClass": "astar_frontier",
																	"sid": 808539280415013,
																	"parameters": {
																		"x": "loopindex(\"j\") + 1",
																		"y": "1",
																		"value": "sorting_var"
																	}
																}
															],
															"sid": 719552748372862
														}
													]
												}
											]
										}
									]
								}
							]
						}
					]
				},
				{
					"functionName": "astar_frontier_get",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "number",
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [],
					"sid": 496446709777968,
					"children": [
						{
							"eventType": "block",
							"conditions": [],
							"actions": [
								{
									"id": "set-function-return-value",
									"objectClass": "Functions",
									"sid": 693432807283811,
									"parameters": {
										"value": "astar_frontier.Back"
									}
								},
								{
									"id": "pop",
									"objectClass": "astar_frontier",
									"sid": 192262395666997,
									"parameters": {
										"where": "back",
										"axis": "x"
									}
								}
							],
							"sid": 314998398106004
						}
					]
				}
			],
			"sid": 617535481925164
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Astar - misc",
			"description": "Разное.",
			"isActiveOnStart": true,
			"children": [
				{
					"functionName": "astar_draw_path",
					"functionDescription": "",
					"functionCategory": "#astar",
					"functionReturnType": "none",
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"type": "comment",
							"text": "Рисует путь."
						}
					],
					"sid": 209796261735141,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for",
									"objectClass": "System",
									"sid": 164381515154746,
									"parameters": {
										"name": "\"i\"",
										"start-index": "0",
										"end-index": "astar_path.Width - 1"
									}
								}
							],
							"actions": [
								{
									"callFunction": "draw_rectangle_on_cell",
									"sid": 837181088735153,
									"parameters": [
										"astar_path.At(loopindex)",
										"\"green\"",
										"25",
										true,
										"1"
									]
								}
							],
							"sid": 471386331467149
						}
					]
				},
				{
					"functionName": "unit_move_according_path",
					"functionDescription": "",
					"functionCategory": "#astar",
					"functionReturnType": "none",
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "UID",
							"type": "number",
							"initialValue": "-1",
							"comment": "",
							"sid": 914064936172157
						}
					],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"type": "comment",
							"text": "Двигает юнита по пути."
						}
					],
					"sid": 847818604845906,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "pick-by-unique-id",
									"objectClass": "grid_unit",
									"sid": 149842427776509,
									"parameters": {
										"unique-id": "UID"
									}
								},
								{
									"id": "is-empty",
									"objectClass": "astar_path",
									"sid": 111642864973779,
									"isInverted": true
								}
							],
							"actions": [],
							"sid": 899817594072061,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "for",
											"objectClass": "System",
											"sid": 230823673890740,
											"parameters": {
												"name": "\"i\"",
												"start-index": "0",
												"end-index": "astar_path.Width - 1"
											}
										}
									],
									"actions": [
										{
											"callFunction": "unit_move_to",
											"sid": 159188957580285,
											"parameters": [
												"grid_unit.UID",
												"astar_path.At(loopindex)"
											]
										}
									],
									"sid": 560368878246571
								}
							]
						}
					]
				}
			],
			"sid": 965943394883839
		}
	],
	"sid": 339607499482058
}